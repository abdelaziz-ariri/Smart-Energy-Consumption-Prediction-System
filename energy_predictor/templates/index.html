{% extends "base.html" %}

{% block title %}Tableau de bord{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1><i class="fas fa-tachometer-alt"></i> Tableau de bord énergétique</h1>
    <div class="controls">
        <button id="demo-data-btn" class="btn btn-outline">
            <i class="fas fa-database"></i> Données de démo
        </button>
        <button onclick="window.location.reload()" class="btn btn-primary">
            <i class="fas fa-sync-alt"></i> Actualiser
        </button>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3>Consommation totale (24h)</h3>
        <div class="value" id="total-consumption">Chargement...</div>
        <div class="trend up"><i class="fas fa-arrow-up"></i> +2.3% vs hier</div>
    </div>
    
    <div class="stat-card">
        <h3>Consommation moyenne</h3>
        <div class="value" id="avg-consumption">Chargement...</div>
        <div class="trend down"><i class="fas fa-arrow-down"></i> -1.1% vs moyenne</div>
    </div>
    
    <div class="stat-card">
        <h3>Heure de pic</h3>
        <div class="value" id="peak-hour">Chargement...</div>
        <div class="trend">Dernière heure: 18h-19h</div>
    </div>
    
    <div class="stat-card">
        <h3>Points de données</h3>
        <div class="value" id="data-points">Chargement...</div>
        <div class="trend">Collecte en temps réel</div>
    </div>
</div>

<div class="chart-container">
    <div class="chart-header">
        <h2><i class="fas fa-chart-line"></i> Consommation récente (7 derniers jours)</h2>
        <div class="controls">
            <button class="period-btn btn btn-outline active" data-period="7d">7 jours</button>
            <button class="period-btn btn btn-outline" data-period="30d">30 jours</button>
            <button class="period-btn btn btn-outline" data-period="90d">90 jours</button>
        </div>
    </div>
    <div id="historical-chart" style="height: 400px;"></div>
</div>

<div class="chart-container">
    <div class="chart-header">
        <h2><i class="fas fa-crystal-ball"></i> Prédiction rapide</h2>
        <div class="controls">
            <select id="predict-days" class="select">
                <option value="3">3 jours</option>
                <option value="7" selected>7 jours</option>
                <option value="14">14 jours</option>
                <option value="30">30 jours</option>
            </select>
            <button id="predict-btn" class="btn btn-success">
                <i class="fas fa-play"></i> Lancer la prédiction
            </button>
        </div>
    </div>
    <div id="prediction-chart" style="height: 400px;">
        <p class="empty-message">Cliquez sur "Lancer la prédiction" pour afficher les prévisions</p>
    </div>
</div>
{% endblock %}